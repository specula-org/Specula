TLC2 Version 2.18 of 22 November 2022 (rev: 12345678)
Running breadth-first search Model-Checking with fp 123 and target 8 workers.
Parsing file /path/to/spec.tla
Parsing file /path/to/module.tla
Semantic processing of module Test
Starting... (2024-01-15 10:00:00)
Computing initial states...
Finished computing initial states: 1 distinct state generated at 2024-01-15 10:00:01.
Error: Invariant QuorumLogInv is violated.
Error: The behavior up to this point is:
State 1: <MCInit line 10, col 1 to line 10, col 50 of module Test>
/\ currentTerm = (s1 :> 1 @@ s2 :> 1 @@ s3 :> 1)
/\ state = (s1 :> "Follower" @@ s2 :> "Follower" @@ s3 :> "Follower")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "none" @@ s2 :> "none" @@ s3 :> "none")
/\ commitIndex = (s1 :> 0 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<>>

State 2: <BecomeCandidate line 20, col 1 to line 20, col 50 of module Test>
/\ currentTerm = (s1 :> 2 @@ s2 :> 1 @@ s3 :> 1)
/\ state = (s1 :> "Candidate" @@ s2 :> "Follower" @@ s3 :> "Follower")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "s1" @@ s2 :> "none" @@ s3 :> "none")
/\ commitIndex = (s1 :> 0 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<[type |-> "RequestVote", term |-> 2, from |-> "s1"]>>

State 3: <HandleRequestVote line 30, col 1 to line 30, col 50 of module Test>
/\ currentTerm = (s1 :> 2 @@ s2 :> 2 @@ s3 :> 1)
/\ state = (s1 :> "Candidate" @@ s2 :> "Follower" @@ s3 :> "Follower")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "s1" @@ s2 :> "s1" @@ s3 :> "none")
/\ commitIndex = (s1 :> 0 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<[type |-> "VoteResponse", term |-> 2, from |-> "s2", granted |-> TRUE]>>

State 4: <BecomeLeader line 40, col 1 to line 40, col 50 of module Test>
/\ currentTerm = (s1 :> 2 @@ s2 :> 2 @@ s3 :> 1)
/\ state = (s1 :> "Leader" @@ s2 :> "Follower" @@ s3 :> "Follower")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "s1" @@ s2 :> "s1" @@ s3 :> "none")
/\ commitIndex = (s1 :> 0 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<>>

State 5: <ClientRequest line 50, col 1 to line 50, col 50 of module Test>
/\ currentTerm = (s1 :> 2 @@ s2 :> 2 @@ s3 :> 1)
/\ state = (s1 :> "Leader" @@ s2 :> "Follower" @@ s3 :> "Follower")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "s1" @@ s2 :> "s1" @@ s3 :> "none")
/\ commitIndex = (s1 :> 0 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<[type |-> "AppendEntries", term |-> 2, from |-> "s1", entries |-> <<[term |-> 2, value |-> "cmd1"]>>]>>

State 6: <HandleAppendEntries line 60, col 1 to line 60, col 50 of module Test>
/\ currentTerm = (s1 :> 2 @@ s2 :> 2 @@ s3 :> 1)
/\ state = (s1 :> "Leader" @@ s2 :> "Follower" @@ s3 :> "Follower")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "s1" @@ s2 :> "s1" @@ s3 :> "none")
/\ commitIndex = (s1 :> 0 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<[type |-> "AppendEntriesResponse", term |-> 2, from |-> "s2", success |-> TRUE]>>

State 7: <AdvanceCommitIndex line 70, col 1 to line 70, col 50 of module Test>
/\ currentTerm = (s1 :> 2 @@ s2 :> 2 @@ s3 :> 1)
/\ state = (s1 :> "Leader" @@ s2 :> "Follower" @@ s3 :> "Follower")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "s1" @@ s2 :> "s1" @@ s3 :> "none")
/\ commitIndex = (s1 :> 2 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<>>

State 8: <Timeout line 80, col 1 to line 80, col 50 of module Test>
/\ currentTerm = (s1 :> 2 @@ s2 :> 2 @@ s3 :> 2)
/\ state = (s1 :> "Leader" @@ s2 :> "Follower" @@ s3 :> "Candidate")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "s1" @@ s2 :> "s1" @@ s3 :> "s3")
/\ commitIndex = (s1 :> 2 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<[type |-> "RequestVote", term |-> 2, from |-> "s3"]>>

State 9: <RejectVote line 90, col 1 to line 90, col 50 of module Test>
/\ currentTerm = (s1 :> 2 @@ s2 :> 2 @@ s3 :> 2)
/\ state = (s1 :> "Leader" @@ s2 :> "Follower" @@ s3 :> "Candidate")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "s1" @@ s2 :> "s1" @@ s3 :> "s3")
/\ commitIndex = (s1 :> 2 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<[type |-> "VoteResponse", term |-> 2, from |-> "s2", granted |-> FALSE]>>

State 10: <HandleStaleResponse line 100, col 1 to line 100, col 50 of module Test>
/\ currentTerm = (s1 :> 2 @@ s2 :> 2 @@ s3 :> 2)
/\ state = (s1 :> "Leader" @@ s2 :> "Follower" @@ s3 :> "Follower")
/\ log = (s1 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s2 :> [offset |-> 1, entries |-> <<[term |-> 1, value |-> "init"], [term |-> 2, value |-> "cmd1"]>>, snapshotIndex |-> 0, snapshotTerm |-> 0] @@ s3 :> [offset |-> 1, entries |-> <<>>, snapshotIndex |-> 0, snapshotTerm |-> 0])
/\ votedFor = (s1 :> "s1" @@ s2 :> "s1" @@ s3 :> "s3")
/\ commitIndex = (s1 :> 2 @@ s2 :> 0 @@ s3 :> 0)
/\ messages = <<>>

The number of states generated: 148265621
Finished in 01h 23min at (2024-01-15 11:23:45)
